<html>
    <head>
        <style>
            th,td {
                border :1px solid;
                padding : 2px;
            }
        </style>
        <script>
            var data;
            var cpu;
            var disks;
            var $ = document.querySelector;
            window.onload = ()=>{
                fetch("/json")
                .then(res=> res.json())
                .then(json => {
                    data = json;
                    cpu = data.cpu;
                    disks = data.disks;
                    document.querySelector("#cpuTable .key").innerHTML = "";
                    document.querySelector("#cpuTable .value").innerHTML = "";
                    for(key in cpu){
                        document.querySelector("#cpuTable .key").innerHTML += "<th>"+key+"</th>";
                        document.querySelector("#cpuTable .value").innerHTML += "<td>"+cpu[key]+"</td>";
                    }

                    document.querySelector("#diskTable .key").innerHTML = "";
                    document.querySelector("#diskTable .values").innerHTML = "";
                    for(key in disks[0]){
                        document.querySelector("#diskTable .key").innerHTML += "<th>"+key+"</th>";
                    }
                    for(value of disks){
                        document.querySelector("#diskTable .values").innerHTML += "<tr></tr>";
                        for(key in disks[0]){
                            document.querySelector("#diskTable .values tr:last-child").innerHTML += "<td>"+value[key]+"</td>";
                        }   
                    }
                }).catch(error => {
                    console.error(error);
                    alert("Failed fetching data;");
                });
            }
        </script>
    </head>
    <body>
        <div>
            <h4>CPU / Memory</h4>
            <table id="cpuTable">
                <thead>
                    <tr class="key">
                        <th>a</th><th>a</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="value">
                        <td>a</td><td>a</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div>
                <h4>Disk</h4>
                <table id="diskTable">
                        <thead>
                            <tr class="key">
                                <th>a</th><th>a</th>
                            </tr>
                        </thead>
                        <tbody class="values">
                            <tr>
                                <td>a</td><td>a</td>
                            </tr>
                        </tbody>
                    </table>
            </div>
    </body>
</html>